# Dgumarket JPA  - Relationships of Entities (BLOG)



<그림 1 : 각 엔티티 구조도> 

**동국대학교 중고거래 플랫폼** 프로젝트 내 엔티티 간 연관관계를 어떻게 설정했는 지에 대한 글입니다. 가장 핵심이 되는 엔티티 간의 관계를 정의하고 각 관계가 어떤 이유로 설정됐는 지를 설명해보려고 합니다. 

**중고거래 플랫폼**이라는 상황이라서 아마 대부분 JPA 연관관계 주제로 많은 책 또는 블로그에서 다루는 예제와가 많아 익숙하실 것 같습니다 :-) 이번 글에서는 두 엔티티 간 <u>**방향성**과</u> <u>**다중성**을</u> 기준으로 나눠서 각 사례별로 설명해볼게요 :) 

___

## **회원, 상품, 채팅방**

____

## **1) 단방향 (Uni-Directional)**

## **2) 양방향 (Bi-Directional)** **& 일대다, 다대일** 

### **회원 : 상품 = One :  Many **	   

우선 회원과 상품의 관계는 양방향 관계로 설정했어요. 객체 그래프 탐색 기능이 양 엔티티 기준으로 모두 필요한 상황이었기 때문인데요. 

1) 회원 ---> 상품 

- 회원의 구매 상품 리스트 조회
- 회원의 판매 상품 리스트 조회

2) 상품 ---> 회원 

- 상품의 업로더인 지 확인 여부 (상품의 수정, 삭제 권한 체크 등과 같은 서비스 로직을 위함)

위와 같이 양방향으로 객체 그래프 탐색 기능을 활용이 필요해서 양방향 관계를 통해 두 엔티티의 관계를 정의했어요! 또한 JPA에서 양방향 관계에서 꼭 지켜야 하는 규칙인 관계의 주인(Owner)를 정하는 것은 회원으로 지정했고 이를 JPA를 통해 표현하기 위해 **mappedBy 속성**을 상품 쪽에서 설정했어요! (주인 관계를 설정하는 기준에 대해서는 ___ 글을 참고해보세요 :-))


# [Spring] AOP 

### | 활용 예시 

\# Transaction \# Logging \# Security 

### | AOP 

> 컴퓨팅에서 관점 지향 프로그래밍 (aspect-oriented programming, AOP)은 횡단 관심사(cross-cutting concern)의 분리를 허용함으로써 모듈성을 증가시키는 것이 목적인 프로그래밍 패러다임이다. 
>
> 코드 그 자체를 수정하지 않는 대신 기존의 코드에 추가 동작(어드바이스)을 추가함으로써 수행하며, "함수의 이름이 'set'으로 시작하면 모든 함수 호출을 기록한다"와 같이 어느 코드가 포인트컷(pointcut) 사양을 통해 수정되는지를 따로 지정한다. 
>
> 이를 통해 기능의 코드 핵심부를 어수선하게 채우지 않고도 비즈니스 로직에 핵심적이지 않은 동작들을 프로그램에 추가할 수 있게 한다. 관점 지향 프로그래밍은 관점 지향 소프트웨어 개발의 토대를 형성한다.



### | AOP 용어 

###### - Target : 부가기능을 부여할 대상 

###### - Aspect : 부가기능 모듈 

###### - Advice : 부가 기능을 담은 구현체 

> 어드바이스는 애스팩트가 '무엇'을 '언제' 할지를 정의하고 있다.

###### - PointCut : 부가 기능이 적용될 대상을 선정하는 방법

###### - JoinPoint : 어드바이스가 적용될 수 있는 위치 

> Spring Framework 내에서는 메소드 조인포인트만 제공한다. 

###### - Proxy : 타겟을 감싸서 타겟의 요청을 대신 받아주는 랩핑(Wrapping) 오브젝트 

> 클라이언트가 타겟을 호출하면, 타겟이 아닌 타겟을 감싸고 있는 프록시가 호출되고, 타겟 메소드 실행 전 선처리 → 타겟 메소드 실행(핵심 기능) → 타겟 메소드 후처리를 실행하도록 구성되어 있다. 핵심 기능과 독립적이지만, 호출 순서가 중요한 경우 (예 - 트랜잭션)에 이러한 구조 속에서 핵심 기능 코드와 부가 기능 코드를 분리하여 사용하는 것이다. 
>
> 프록시는 결국 클라이언트의 요청을 중간에서 가로챈 후, 타겟의 메소드가 호출되기 전 필요한 선처리와 타겟 메소드 호출된 이후의 후처리를 담당하는 것이다. 

###### - Introduction : 타겟 글래스의 코드 변경 없이 신규 메소드 또는 멤버변수를 추가하는 기능 

###### - Weaving : 지정된 객체에 애스팩트를 적용해서 새로운 프록시 객체를 생성하는 과정 

> AOP의 대표 사례인 트랜잭션으로 설명하자면, 트랜잭션 애스팩트를 "모든 유저 리스트 조회" 메소드(타겟)에 지정되어 있다면, "모든 유저 리스트 조회" 메소드가 실행되기 전 커넥션을 열고, 모든 유저 리스트 조회 이후 다시 커넥션 자원을 반환하는 기능이 추가된 프록시를 생성하는 과정을 의미한다. 클라이언트가 타겟의 기능인 "모든 유저 리스트 조회"를 요청하게 되면 프록시 객체가 해당 요청을 가로챈 후 애스팩트를 적절한 시점에 호출하여 클라이언트가 기대하는 응답을 반환하게 된다.

### | PointCut 표현식 

